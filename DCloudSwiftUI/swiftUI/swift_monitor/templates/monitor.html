{% extends "base.html" %}

{% block moreScripts%}
<script src="/static/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="/static/js/table_js.js" type="text/javascript"></script>
<script type="text/javascript">
//http://datatables.net/release-datatables/examples/basic_init/filter_only.html
$(document).ready(function() {
        $('#monitor').dataTable( {
            "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
            "sPaginationType": "bootstrap",
            "oLanguage": {
            "sLengthMenu": "_MENU_ records per page"
            },
            //"bPaginate": false,
            "bLengthChange": false,
            //"bFilter": true,
            //"bSort": false,
            "bInfo": false,
            //"bAutoWidth": false
            "asStripeClasses": [],
            "aoColumnDefs": [
            { "bSortable": false, "aTargets": [ 3, 4, 5 ] }
            ]
            });
        $.extend( $.fn.dataTableExt.oStdClasses, {
            "sWrapper": "dataTables_wrapper form-inline"
            });
        });
</script>
{% endblock %}

{% block moreStyles%}
<link rel="stylesheet" href="/static/css/jquery.dataTables.css">
<link rel="stylesheet" href="/static/css/table_style.css">
{% endblock %}

{% block head_title %}New Account{% endblock %}

{% block body_class %}home{% endblock %}
{% block navbar_class %}{% endblock %}
{% block navbar %}
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </a>
                            <a class="brand" href="/">Cloud Storage</a>
                            <div class="nav-collapse">
                              <!--ul class="nav">
                                <li><a href="#tab_one">One</a></li>
                                <li><a href="#tab_two">Two</a></li>
                              </ul-->
                              {% block account_bar %}{% include "_account_bar.html" %}{% endblock %}
                            </div>
                    </div>
{% endblock %}
{% block body %}
<div class="container-fluid">
  <div class="row-fluid">
    <div id="sidebar" class="span3">
      {% include "_side_bar.html" %}
    </div>
    <div id="screen" class="span9">
      <div class="row-fluid">
        <div class="span12">
          <table class="table">
            <tr>
                <th>IP</th>
                <th>Nodes</th>
                <th>Status</th>
                <th>Error</th>
                <th>Used</th>
                <th>Capacity</th>
            </tr>
            <tr>
                <td>{{zone.ip}}</td>
                <td>{{zone.nodes}}</td>
                <td></td>
                <td></td>
                <td>{{zone.used}}%</td>
                <td>{{zone.capacity}}</td>
            </tr>
          </table>
        </div>
      </div>
      <div class="row-fluid">
          <div id="sidebar" class="span12" >
          <table class="table" id="monitor">
          <thead>
            <tr>
                <th>Hostname</th>
                <th>Node IP</th>
                <th>Node</th>
                <th>HD Number</th>
                <th>HD Status</th>
                <th>Capacity</th>
            </tr>
          </thead>
            {% for node in nodes %}
            <style type="text/css">
                .display{{node.index}} {
                }
            </style>
            <tr>
                <td>{{node.hostname}}</td>
                <td><a href="#" id="display{{node.index}}">{{node.ip}}</a></td>
                <td>
                {% if node.status == "dead" %}
                <table><td class="fail_tab">
                {% else %}
                <table><td class="success_tab">
                {% endif %}
                {{node.status}}
                </table>
                </td>
                <td>
                <!-- HD Number -->
                    {{node.hd_number}}
                    <br />
                    <table class="display{{node.index}}">
                    {% for info in node.hd_info %}
                    <tr>
                        <td>{{info.serial}}</td>
                    </tr>
                    {% endfor %}
                    </table>
                </td>
                <!-- HD Status -->
                <td>
                {% if node.mode == "waiting" %}
                <table><td class="fail_tab">
                {% else %}
                <table><td class="success_tab">
                {% endif %}
                {{node.mode}}
                </table>
                <table class="display{{node.index}}">
                    {% for info in node.hd_info %}
                    <tr>
                    {% if info.status == "Broken" %}
                    <td class="fail_tab">
                    {% else %}
                    <td class="success_tab">
                    {% endif %}
                    {{info.status}}</td>
                    </tr>
                    {% endfor %}
                    </table>
                </td>
                <!--Capacity-->
                <td>
                    6.0TB
                    <table class="display{{node.index}}">
                        {% for info in node.hd_info %}
                        <tr>
                            <td>
                                2.0TB
                            </td>
                        </tr>
                        {% endfor %}
                    </table>
                </td>
            </tr>
            <script>
                $(".display{{node.index}}").css("display","none"); //set default hidden
                $("#display{{node.index}}").click(function () {
                    var display_status = $(".display{{node.index}}").css("display");
                    if(display_status=="none") {
                        $(".display{{node.index}}").css("display","");
                    }
                    else{
                        $(".display{{node.index}}").css("display","none");
                    }
                });
            </script>
            {% endfor %}
            <!--tr>
            <td>+</td>
            <td>172.30.11.33</td>
            <td>Error</td>
            <td>1</td>
            </tr-->
          </table>
        </div>
      </div>
</div></div>
{% endblock %}
