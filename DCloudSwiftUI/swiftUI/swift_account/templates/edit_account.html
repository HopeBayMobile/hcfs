{% extends "base.html" %}
{% block head_title %}New Account{% endblock %}

{% block body_class %}home{% endblock %}

{% block moreScripts%}
  <script src="/static/js/bootstrap-modal.js" type="text/javascript"></script>
{% endblock %}

{% block navbar_class %}{% endblock %}
{% block navbar %}
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                                <span class="icon-bar"></span>
                            </a>
                            <a class="brand" href="/">Cloud Storage</a>
                            <div class="nav-collapse">
                              <!--ul class="nav">
                                <li><a href="#tab_one">One</a></li>
                                <li><a href="#tab_two">Two</a></li>
                              </ul-->
                              {% block account_bar %}{% include "_account_bar.html" %}{% endblock %}
                            </div>
                    </div>
{% endblock %}
{% block body %}
<div class="container-fluid">
    <div class="row-fluid">
    <div id="sidebar" class="span3">
      <div class="well sidebar-nav">
        <ul class="nav nav-list">
          <li>Dashboard</li>
          <li><a href="/accounts/">Account Management</a></li>
          <li>Monitor</li>
          <li>Maintenance</li>
          <li>System Log</li>
        </ul>
      </div>
</div>
<div id="screen" class="span9">
<h2>Edit Account</h2>
<form action="/accounts/{{account_id}}/modify" method="post" id="form1">
    {% csrf_token %}
    <div id="accountDiv" data-role="fieldcontain">
      Account ID: {{account_id}}
      <label for="description">Description:</label><textarea rows="3" name="description" id="description" class="required">{{description}}</textarea>
      <label for="submit"></label>
      <input class="btn" type="submit" value="OK" /> <a class="btn" href="/accounts/{{account_id}}">Cancel</a>
    </div>
</form>
  <div class="row-fluid">
    <div class="span7">
<h3>User List under the account "{{account_id}}":</h3>
    </div>
    <div class="span2">
    <a class="btn btn-primary" href="/accounts/{{account_id}}/user/new">New User</a>
    </div>
  </div>
  <div class="row-fluid">
    <div class="span9">
  <table class="table">
<tr>
<th></th>
<th>User Name</th>
<th>Description</th>
<th></th>
</tr>
<tr>
<td>1</td>
<td><a href="/accounts/{{account_id}}/user/Admin/edit">Admin</a></td>
<td>I'm Administrator...</td>
<td><a class="btn" id="reset_pw$Yoo">Reset PW</a> <a class="btn" id="query_pw$Admin">Query</a></td>
</tr>
<tr>
<td>2</td>
<td><a href="/accounts/{{account_id}}/user/User1/edit">User1</a></td>
<td>I'm ghost</td>
<td><a class="btn" id="reset_pw$Yoo">Reset PW</a> <a class="btn" id="query_pw$User1">Query</a> <a class="btn" href="/accounts/user/User1/enable"><i class="icon-off"></i>On</a></a></td>
</tr>
<tr>
<td>1</td>
<td><a href="/accounts/{{account_id}}/user/Yooedit">Yoo</a></td>
<td>lala...</td>
<td><a class="btn" id="reset_pw$Yoo">Reset PW</a> <a class="btn" id="query_pw$Yoo">Query</a> <a class="btn" id="dis_user$Yoo" href="#modal" class="btn" data-toggle="modal" data-target="#disable_user"><i class="icon-off"></i>Off</a></a></td>
</tr>
  </table>
  </div>
  </div>
</div>

<div class="modal hide" id="disable_user">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Attention!</h3>
  </div>
  <div class="modal-body">
    This will suspend user "[[User]]" service, are you sure?
  </div>
  <div class="modal-footer">
    <a class="btn btn-primary" href="/accounts/user/User1/disable">Yes</a>
    <a class="btn" href="">No</a>
  </div>
</div>

<div class="modal hide" id="query_user_password">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Query Password</h3>
  </div>
  <div class="modal-body">
    User "[[User]]" Password is "trdgh125e555"
  </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
  </div>
</div>

<div class="modal hide" id="reset_user_password">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Reset Password</h3>
  </div>
  <div class="modal-body">
    <label for="oldpassword">Please enter old password "trdgh125e555"</label>
    <input type="text" name="oldpassword" id="oldpassword" class="required" minlength="3"/>
    </div>
  <div class="modal-footer">
   <a class="btn" id="reset_password">OK</a> <a href="#" class="btn" data-dismiss="modal">Cancel</a>
  </div>
</div>

<div class="modal hide" id="reset_password_successful">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Reset Password Successful</h3>
  </div>
  <div class="modal-body">
    New password is: kgdSC8056B25ef
    </div>
  <div class="modal-footer">
    <a href="#" class="btn" data-dismiss="modal">Close</a>
  </div>
</div>

  <script type="text/javascript">
   $('a[id*="dis_user"]').click(function(evt){
    $('#disable_user').modal('show');
  });
   
   $('a[id*="query_pw"]').click(function(evt){
    //TODO: use ajax to query password
    $('#query_user_password').modal('show');
  });
  
  $('a[id*="reset_pw"]').click(function(evt){
    //TODO: use ajax to query password
    $('#reset_user_password').modal('show');
  });
  
  $('#reset_password').click(function(evt){
    $('#reset_user_password').modal('hide');
    $('#reset_password_successful').modal('show');
  });
  </script>
{% endblock %}