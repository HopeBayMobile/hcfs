<!DOCTYPE html>
<html lang="zh-tw">
    <head>
        <!--Title-->

        <title>Delta Storage Gateway</title>

        <!--Metadata-->

        <meta http-equiv="Content-type" content="text/html; charset=utf-8" />

        <!--CSS-->
        <link rel="stylesheet" type="text/css" name="bootstrap" href="/static/css/bootstrap.css" />
        <link rel="stylesheet" type="text/css" name="bootstrap" href="/static/css/site.css" />
        <link rel="stylesheet/less" type="text/css" href="/static/css/site-dashboard.less">
        {% block stylesheet %}
        {% endblock stylesheet %}
        <style type="text/css">
            {% block css_style %}
            /* Give a quick and non-cross-browser friendly divider */
            {% endblock css_style %}
        </style>
        <script src="/static/js/less-1.3.0.min.js" type="text/javascript"></script>
        <script src="/static/js/jquery-1.7.min.js"></script>
        <script src="/static/js/bootstrap.js"></script>
        <script src="/static/js/jquery-ui-1.8.18.custom.min.js"></script>
        <script type="text/javascript">
            $(function(){
                {% if tab %}
                $("#site-tab li:has(a[href='\/dashboard\/{{tab}}\/'])").addClass('active');
                {% else %}
                $("#site-tab li:first").addClass('active');
                {% endif %}
                $('#site-tab li').append('<span></span>')

                function setIndicator(name, status){
                    if (status){
                        $('#'+name).addClass('work');
                    } else {
                        $('#'+name).removeClass('work');
                    }
                }

                // Update the indicator icons
                function update_indicator(){
                    $.get('/dashboard/indicator/', function(ctnt, stat, opts){
                        if (stat == 'success'){
                            var indic;
                            var data = JSON.parse(ctnt);
                            for (indic in data){
                                setIndicator(indic, data[indic]);
                            }
                        }
                    });
                    setTimeout(update_indicator, 5000);
                }
                update_indicator();

                $(function(){
                    $(".msg-detail").on('click', function(){
                        $(this).siblings('.msg-content').toggle(500);
                    });
                });
            });
            {% block javascript %}
            {% endblock javascript %}
        </script>
    </head>

    <body>
    <div class="site-container">
    <div class="site-header">
        <p class="navbar-text pull-right hide">
          {% if user.is_authenticated %}
          <a href="/logout" class="btn" style="margin: 0;">Logout</a>
          {% endif %}
        </p>
        <div class="logo-box">
        </div>
        <div id="" class="notify-box-group">
            <div class="notify-box-row">
                <div id="system_check" class="notify-box img-system">
                </div>
                <div id="network_ok" class="notify-box img-network">
                </div>
                <div id="flush_inprogress" class="notify-box img-flush">
                </div>
                <div id="dirtycache_nearfull" class="notify-box img-dirtycache">
                </div>
            </div>
            <div class="notify-box-row3">
                {{ user.username }}
                <a href="/logout"><img class="logout" src="/static/img/dashboard/indicator_logout_icon.png" alt=""></a>
            </div>
            <div class="notify-box-row2">
                <div id="HDD_ok" class="notify-box img-indicator">
                HDD
                </div>
                <div id="NFS_srv" class="notify-box img-indicator">
                NFS
                </div>
                <div id="SMB_srv" class="notify-box img-indicator">
                SMB
                </div>
            </div>
            <div class="notify-box-row4">
                <p>20 / 100</p>
                <p>100 KB / 20 Sec</p>
            </div>
        </div>
    </div>
    <div class="left-bg bg-fixed">
        &nbsp;
    </div><!-- / -->
    <div class="main-bg bg-fixed">
        &nbsp;
    </div>
    <div class="left-row">
        <div>
            <ul class="tab-btn" id="site-tab">
              <li class=""><a href="{% url dashboard:index %}">Dashboard</a></li>
              <li class=""><a href="{% url dashboard:account action=None %}">Storage Account</a></li>
              <li class=""><a href="{% url dashboard:system action=None %}">System</a></li>
              <li class=""><a href="{% url dashboard:sharefolder action=None %}">Share Folder</a></li>
              <li class=""><a href="{% url dashboard:sync %}">Sync</a></li>
              <li class=""><a href="{% url dashboard:syslog %}">System Log</a></li>
              <li class=""><a href="{% url dashboard:power %}">
                  <img src="/static/img/dashboard/power_icon.png" alt="">
              </a></li>
            </ul>
            <div class="left-bg-tail"></div>
        </div>
    </div>
    <div class="main-row">
        {% include "dashboard/msgbox.html" %}
        <div class="tab-content">
            {% block tab_content %}
            {% endblock tab_content %}
        </div>
    </div>

    </div> <!-- site-body -->
    </body>
</html>
