#!/bin/sh
# randisk.img is initramfs format, which is an gzip file of a cpio file
#set -x

if [ "$1" = "-h" -o $# -ne 1 ]; then     
        echo
        echo "  Usage: `basename $0` ramdiskDirName"        
		echo "  Example:"
		echo "           `basename $0` root/"
        echo
        exit 1
fi

sourceDir="$1"

cd ${sourceDir}
find . | cpio -H newc -o | gzip > ../ramdisk.img
#set +x
