#!/bin/sh

if [ "$1" = "-h" -o $# -ne 1 ]; then     
        echo
        echo "  Usage: `basename $0` bootImageName"        
		echo "  Example:"
		echo "           `basename $0` boot.img"
        echo
        exit 1
fi

bootImgName=`basename $1`
userBootImgName=${bootImgName}

currentDir=`pwd`
sourceDir=`dirname $1` 
cd ${sourceDir}                                                                 
sourceDir=`pwd`

bootImgName=${sourceDir}/${bootImgName}
if [ "${userBootImgName}" != "boot.img.orig" ];then
	mv ${bootImgName} ${sourceDir}/boot.img.orig
	bootImgName=${sourceDir}/boot.img.orig
fi
cd ${currentDir}


if [ ! -d bootimg ]; then
	mkdir bootimg
fi
cd bootimg

split_bootimg.pl ${bootImgName}

ramdiskImageName=boot.img.orig-ramdisk.gz
unzip-ramdisk ${ramdiskImageName}
